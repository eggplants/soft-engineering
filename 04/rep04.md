<!-- markdownlint-disable MD024 -->
# ソフトウェア工学 第4回 レポート課題

- 学生番号: 201811528
- 氏名: 春名航亨

## 【授業内課題の確認】

### 【授業内課題１：スコープ】

| コメ番号 | エラー |                                         理由                                          |
| :------: | :----: | :-----------------------------------------------------------------------------------: |
|    1     |   -    |  グローバル変数は、その同一プログラム内であれば関数やforブロック内であっても参照可能  |
|    2     |   -    |      関数内で宣言された変数は、同一関数内であればforブロック内であっても参照可能      |
|    3     |   -    | forブロック内で宣言された変数は、同一ブロック内であれば参照可能(下位ブロックでも可能) |
|    4     |   -    |  グローバル変数は、その同一プログラム内であれば関数やforブロック内であっても参照可能  |
|    5     |   -    |                 関数内で宣言された変数は、同一関数内であれば参照可能                  |
|    6     |   o    |                 ブロック内で宣言された変数はブロック外で参照できない                  |
|    7     |   -    |  グローバル変数は、その同一プログラム内であれば関数やforブロック内であっても参照可能  |
|    8     |   o    |                  別の関数内で宣言された変数は別関数内で参照できない                   |
|    9     |   o    |       別の関数内やその関数のブロック内で宣言された変数は別関数内で参照できない        |

### 【授業内課題２：文字列のオーバーラン】

```c
#include <stdio.h>

char* func_arr(){
  char ret_arr[] = "Hey! This is a local string in a function\n";
  return ret_arr;
}

int main(){
  printf("%s", func_arr());
}
```

>自分の環境と、上記のコードを実行したら何が起きたかを簡潔に述べてください

#### 環境

- OS: Ubuntu 21.10
- シェル: zsh 5.8 (x86_64-ubuntu-linux-gnu)
- コンパイラ: gcc (Ubuntu 11.2.0-7ubuntu2) 11.2.0

#### 起きたこと

- `(null)`と出力された。

### 【レポート課題１：破壊的な文字列操作】

>文字列を渡すと、その文字列に含まれている小文字を大文字に、大文字を小文字に書き換える、破壊的な関数を作ってください。
>メイン関数内では、書き換える前の文字列と、書き換え後の文字列をそれぞれprintfの%s指定子で表示してください。
>実行結果として、誰か好きな芸能人やキャラクターの氏名と、誕生日を繋げて書いてください。

#### ソースコード

```c
#include <stdio.h>

char _swap_case(char c) {
  if (64 < c && c < 91) {
    c += 32;
  } else if (96 < c && c < 123) {
    c -= 32;
  }
  return c;
}

void swap_case(char *arr) {
  int i = 0;
  while (arr[i] != '\0') arr[i++] = _swap_case(arr[i]);
}

void main() {
  char s[] = "Doraemon (September 3, 2112-)";
  printf("original: %s\n", s);
  swap_case(s);
  printf("swapped: %s\n", s);
}
```

#### 出力結果

![_](img/2021-10-29-21-40-46.png)

### 【レポート課題２：フィボナッチ数列】

再帰計算を行う関数を使って、「n個めの数値は、n-1個めの数値と、n-2項めの数値を足したもの」という性質を持つ数列フィボナッチ数列の、任意のn項めの値を計算するプログラムを書いてください。
以下のソースコードを参考に、main関数から、1から29までのフィボナッチ数列を画面に表示してみましょう。

#### ソースコード

```c
#include <stdio.h>
int N = 30;

int calc_fib(int n) {
  return n < 2 ? n : calc_fib(n - 1) + calc_fib(n - 2);
}

void main() {
  int i = 0;
  for (; ++i <= N;)
    printf("%2d: %-10d%c", i, calc_fib(i), i % 5 ? ' ' : '\n');
}
```

#### 実行結果

Note: *29までだと見た目が悪かったので30まで出力しています*

![_](img/2021-10-29-21-58-29.png)

### 【レポート課題３：メモ化を使った高速フィボナッチ数列】（発展課題）

>発展課題です。解ける人だけ解いてください。
>課題２で作成したフィボナッチ数列に、グローバル変数として計算済みの値を格納する、メモ化処理を施してください。そして、すぐに終わらない程度の大きな数で実行して、ストップウォッチ（WindowsのtimeitやLinuxのtimeコマンドでもよい）で実行時間を計測してください。メモ化した場合とそうでない場合でどのくらい実行速度に差が出たかを書いてください。

#### ソースコード

```c
#include <stdio.h>
int N = 30;
int memo[114514];

int calc_fib(int n) {
  if(memo[n] == 0)
    memo[n] = n < 2 ? n : calc_fib(n - 1) + calc_fib(n - 2);
  return memo[n];
}

void main() {
  int i = 0;
  for (; ++i <= N;)
    printf("%2d: %-10d%c", i, calc_fib(i), i % 5 ? ' ' : '\n');
}
```

#### 実行結果

![_](img/2021-10-29-22-55-08.png)

#### 実行時間

30までだと両方とも一瞬だったので、45まで計算した。

```shellsession
$ time ({gcc calc_fib.c&&./a.out}&>2)
( { gcc calc_fib.c && ./a.out; } &> 2; )  27.22s user 0.00s system 99% cpu 27.224 total
$ time ({gcc calc_fib_memo.c&&./a.out}&>2)
( { gcc calc_fib_memo.c && ./a.out; } &> 2; )  0.05s user 0.02s system 99% cpu 0.068 total
```

| memo  | time(s) |
| :---: | :-----: |
| なし  | 27.224  |
| あり  |  0.068  |

### 【レポート課題４：面白かったり、役に立ったりする、オリジナルのコマンドを作る】

>何か実用性のあるコマンドラインプログラムか、ジョークアプリとして動作するコマンドラインプログラムを作ってみてください。

#### 概要

catコマンドがあるのに、dogコマンドがないのは犬好きにとって不憫だと思うので、ファイル名を渡すと犬がそれを噛むdogコマンドを作った。

#### ソースコード

```c
#include <stdio.h>
int main(int argc,char* argv[]){
    printf("The dog bit the file %s.", argv[1]);
}
```

#### 実行例

#### 使い方

コマンドラインから
dog 【噛んでほしいファイル名】
を入力する。
すると、犬がそのファイルを噛んだというメッセージが表示される。実際にはメッセージが表示されるだけで、何も起こらない。

### 【感想や要望】
